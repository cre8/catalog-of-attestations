# Attestation Rulebook for attestations of type Gym Membership Card

* Author(s):
    * Example Gym Association

| Version | Date | Description |
|---------|------------|------------|
| 1.0.0 | 2025-01-29 | Initial version |

**Feedback:**

* <https://github.com/cre8/catalog-of-attestations/issues>

---

## 1 Introduction

### 1.1 Document scope and purpose

This Attestation Rulebook defines the "Gym Membership Card" attestation type. The purpose of this attestation is to provide a verifiable digital credential that proves an individual's membership status at a fitness facility. This enables gym members to digitally prove their membership for access control, discounts at partner facilities, and verification of membership tier benefits.

This attestation is designed as a **non-qualified EAA** for use within the EUDI Wallet ecosystem, enabling interoperability between different gyms and fitness facilities that accept this credential format.

### 1.2 Document structure

This Rulebook is structured as follows:

* **Chapter 2** describes the attestation attributes and metadata in an encoding-independent manner.
* **Chapter 3** specifies how the attestation attributes and metadata are encoded in SD-JWT VC format.
* **Chapter 4** specifies attestation usage.
* **Chapter 5** defines how trust anchors for attestation verification can be obtained.
* **Chapter 6** defines attestation revocation mechanisms.
* **Chapter 7** provides compliance information.
* **Chapter 8** provides references.

### 1.3 Key words

This document uses the capitalised key words 'SHALL', 'SHOULD' and 'MAY' as specified in [RFC 2119], i.e., to indicate requirements, recommendations and options specified in this document.

In addition, 'must' (non-capitalised) is used to indicate an external constraint, i.e., a requirement that is not mandated by this document, but, for instance, by an external document. The word 'can' indicates a capability, whereas other words, such as 'will', and 'is' or 'are' are intended as statements of fact.

### 1.4 Terminology

This document uses the terminology specified in Annex 1 of the Architecture and Reference Framework (ARF).

---

## 2 Attestation attributes and metadata

### 2.1 Introduction

This chapter defines all attributes that an attestation of type "Gym Membership Card" may contain. Attributes are defined in an encoding-independent manner.

This attestation is a **non-qualified EAA**. According to ARB_12 in [Topic 12], the attribute `attestation_legal_category` is defined with the value `non-qualified-EAA`.

### 2.2 Mandatory attributes

| **Data Identifier** | **Definition** | **Data type** | **Example value** |
|---------------------|----------------|---------------|-------------------|
| attestation_legal_category | Indicates the legal category of this attestation | string | `non-qualified-EAA` |
| gym_name | Human-readable name of the gym that issued the membership | string | `Mighty Fitness` |
| member_id | Unique membership identifier assigned by the issuing gym | string | `MF-2025-001234` |
| membership_tier | The membership tier defining included services and pricing | string | `Premium` |

### 2.3 Optional attributes

| **Data Identifier** | **Definition** | **Data type** | **Example value** |
|---------------------|----------------|---------------|-------------------|
| member_name | Full name of the gym member | string | `John Doe` |
| member_photo | Photograph of the member for visual verification | base64-encoded image | (binary data) |
| home_facility | Primary facility location for the membership | string | `Berlin - Mitte` |
| access_facilities | List of facilities the member can access | array of strings | `["Berlin - Mitte", "Berlin - Kreuzberg"]` |

### 2.4 Conditional attributes

| **Data Identifier** | **Definition** | **Data type** | **Example value** |
|---------------------|----------------|---------------|-------------------|
| corporate_account_id | Corporate account identifier, if membership is through an employer | string | `CORP-ACME-001` |
| family_plan_id | Family plan identifier, if part of a family membership | string | `FAM-2025-0042` |

### 2.5 Mandatory metadata

| **Data Identifier** | **Definition** | **Data type** | **Example value** |
|---------------------|----------------|---------------|-------------------|
| valid_from | Date from which the membership is valid (inclusive) | datetime | `2025-01-01T00:00:00Z` |
| valid_until | Date until which the membership is valid (inclusive), assuming not revoked | datetime | `2026-01-01T00:00:00Z` |
| issuer | Identifier of the issuing entity (gym) | URI | `https://gym.example.com` |

### 2.6 Optional metadata

| **Data Identifier** | **Definition** | **Data type** | **Example value** |
|---------------------|----------------|---------------|-------------------|
| issued_at | Timestamp when the attestation was issued | datetime | `2025-01-15T10:30:00Z` |
| trust_anchor | Location of the trust anchor for verification | URI | `https://raw.githubusercontent.com/cre8/catalog-of-attestations/main/trust-lists/gym-members.json` |

### 2.7 Conditional metadata

*No conditional metadata defined for this attestation type.*

---

## 3 Attestation encoding

### 3.1 ISO/IEC 18013-5-compliant encoding

*This attestation type does not support ISO/IEC 18013-5 encoding.*

### 3.2 SD-JWT VC-based encoding

This attestation type supports the format specified in "SD-JWT-based Verifiable Credentials (SD-JWT VC)". The attestations comply with the 'SD-JWT VCs' profile specified in [HAIP].

#### 3.2.1 Verifiable Credential Type (vct)

The Verifiable Credential Type (`vct`) for this attestation type SHALL be:

```
https://gym.example.com/attestations/gym-membership-card
```

#### 3.2.2 Claim definitions

**IANA-registered claims:**

| **Data Identifier** | **Attribute identifier** | **Encoding format** | **Reference/Notes** | **Disclosable** |
|---------------------|--------------------------|---------------------|---------------------|-----------------|
| valid_from | nbf | number (NumericDate) | [RFC 7519] Section 4.1.5 | MUST NOT |
| valid_until | exp | number (NumericDate) | [RFC 7519] Section 4.1.4 | MUST NOT |
| issuer | iss | string (URI) | [RFC 7519] Section 4.1.1 | MUST NOT |
| issued_at | iat | number (NumericDate) | [RFC 7519] Section 4.1.6 | MUST NOT |

**Private claims specific to this attestation type:**

| **Data Identifier** | **Attribute identifier** | **Encoding format** | **Notes** | **Disclosable** |
|---------------------|--------------------------|---------------------|-----------|-----------------|
| attestation_legal_category | attestation_legal_category | string | As defined in Section 2.1 | MUST NOT |
| gym_name | gymName | string | Name of the issuing gym | MAY |
| member_id | memberId | string | Unique member identifier | MUST |
| membership_tier | membershipTier | string (enum) | One of: Basic, Standard, Premium, VIP | MAY |
| member_name | memberName | string | Full name of the member | MUST |
| member_photo | memberPhoto | string (base64) | Photo for visual verification | MUST |
| home_facility | homeFacility | string | Primary facility | MAY |
| access_facilities | accessFacilities | array of strings | Accessible facilities | MAY |

#### 3.2.3 Example

**Example JWT claim set (before SD-JWT encoding):**

```json
{
  "vct": "https://gym.example.com/attestations/gym-membership-card",
  "iss": "https://gym.example.com",
  "iat": 1737018000,
  "nbf": 1704067200,
  "exp": 1735689600,
  "attestation_legal_category": "non-qualified-EAA",
  "gymName": "Mighty Fitness",
  "memberId": "MF-2025-001234",
  "membershipTier": "Premium",
  "memberName": "John Doe",
  "homeFacility": "Berlin - Mitte"
}
```

**Selectively disclosable claims:**

In the issued SD-JWT VC, the following claims SHALL be made selectively disclosable:
- `memberId`
- `memberName`
- `membershipTier`
- `homeFacility`
- `accessFacilities` (if present)
- `memberPhoto` (if present)

### 3.3 W3C Verifiable Credentials Data Model-based encoding

*This attestation type does not support W3C VCDM encoding.*

---

## 4 Attestation usage

### 4.1 Primary use cases

This attestation type is intended for the following use cases:

1. **Gym access control**: Presenting the credential at facility entry points for automated or manual verification.
2. **Partner facility access**: Using the credential to gain access to partner gyms or fitness networks.
3. **Membership tier verification**: Proving membership tier for accessing tier-specific services or equipment.
4. **Discount verification**: Presenting membership status to receive member discounts at affiliated businesses.

### 4.2 PID verification requirement

A Relying Party receiving this attestation SHOULD NOT require PID verification for basic membership verification. However, for high-value transactions or access to restricted areas, the Relying Party MAY request PID verification.

### 4.3 Device binding

Attestations of this type SHALL be **device-bound**. The attestation is cryptographically bound to the Wallet Unit's key, ensuring that only the legitimate holder can present the credential.

### 4.4 Presentation requirements

This attestation supports both online and offline presentation:

- **Online**: Via OpenID4VP protocol
- **Offline**: Via proximity-based presentation (Bluetooth Low Energy)

### 4.5 Relying Party obligations

A Relying Party processing this attestation type SHALL:

1. Verify the signature of the attestation using the trust anchor specified in Section 5.
2. Check that the current date/time is within the validity period (`nbf` to `exp`).
3. Verify that the attestation has not been revoked (see Section 6).
4. Verify the key binding proof to ensure the presenter is the legitimate holder.

---

## 5 Trust anchors

### 5.1 Trust framework

This attestation type uses a **List of Trusted Entities (LoTE)** according to ETSI TS 119 602 as the trust framework.

### 5.2 Trust anchor location

The trust anchor for verifying attestations of this type can be obtained from:

```
https://raw.githubusercontent.com/cre8/catalog-of-attestations/main/trust-lists/gym-members.json
```

### 5.3 Trust anchor usage

A Relying Party SHALL verify that the issuer of the attestation is listed in the LoTE and that the issuer's status is valid. The verification process is as follows:

1. Retrieve the LoTE from the trust anchor location.
2. Verify the LoTE signature (if signed).
3. Locate the issuer in the `TrustedEntitiesList`.
4. Verify that the issuer's status allows for valid attestation issuance.
5. Use the issuer's public key or certificate to verify the attestation signature.

---

## 6 Revocation

### 6.1 Revocation mechanism

Attestations of this type are **revocable**. The revocation mechanism used is the **Attestation Status List** as specified in the IETF Token Status List draft.

### 6.2 Validity period

Attestations of this type have a maximum validity period of **1 year** (365 days). Shorter validity periods MAY be used based on membership duration.

### 6.3 Revocation checking

Relying Parties SHALL check the revocation status of presented attestations before accepting them. The status list location is embedded in the attestation's `status` claim (if present) or can be obtained from the issuer's metadata.

---

## 7 Compliance

### 7.1 Regulatory compliance

This Attestation Rulebook is designed to comply with:

- **European Digital Identity Regulation (EU 2024/1183)**: This attestation is a non-qualified EAA as defined in the Regulation.
- **EUDI Architecture Reference Framework (ARF)**: This Rulebook follows the requirements specified in Topic 12 of Annex 2 of the ARF.
- **GDPR (EU 2016/679)**: Personal data processing in relation to this attestation must comply with GDPR requirements.

### 7.2 Technical standards compliance

This attestation type complies with:

- **SD-JWT VC**: As specified in draft-ietf-oauth-sd-jwt-vc
- **OpenID4VCI**: For issuance of the attestation
- **OpenID4VP**: For presentation of the attestation
- **HAIP**: OpenID4VC High Assurance Interoperability Profile

---

## 8 References

| **Item Reference** | **Standard name/details** |
|--------------------|---------------------------|
| [European Digital Identity Regulation] | [Regulation (EU) 2024/1183](https://eur-lex.europa.eu/legal-content/EN/TXT/HTML/?uri=OJ:L_202401183) of the European Parliament and of the Council of 11 April 2024 amending Regulation (EU) No 910/2014 as regards establishing the European Digital Identity Framework |
| [ARF] | EU Digital Identity Wallet Architecture and Reference Framework |
| [HAIP] | OpenID4VC High Assurance Interoperability Profile |
| [SD-JWT VC] | SD-JWT-based Verifiable Credentials (SD-JWT VC). Available: <https://datatracker.ietf.org/doc/draft-ietf-oauth-sd-jwt-vc/> |
| [OpenID4VCI] | OpenID for Verifiable Credential Issuance. Available: <https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0.html> |
| [OpenID4VP] | OpenID for Verifiable Presentations. Available: <https://openid.net/specs/openid-4-verifiable-presentations-1_0.html> |
| [RFC 2119] | Key words for use in RFCs to Indicate Requirement Levels |
| [RFC 7519] | JSON Web Token (JWT) |
| [ETSI TS 119 602] | Electronic Signatures and Trust Infrastructure (ESI); List of trusted entities; Data model |
| [Topic 12] | ARF Annex 2 - Topic 12 - Attestation Rulebooks. Available: <https://eu-digital-identity-wallet.github.io/eudi-doc-architecture-and-reference-framework/latest/annexes/annex-2/annex-2-high-level-requirements/#a2312-topic-12-attestation-rulebooks> |